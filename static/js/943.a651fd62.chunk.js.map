{"version":3,"file":"static/js/943.a651fd62.chunk.js","mappings":"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","sources":["tsx/helpers.ts","tsx/components/CommunityItem.tsx","tsx/pages/Communities.tsx"],"sourcesContent":["import Swal from \"sweetalert2\";\r\n\r\nconst groupBy = function (array: object[], key: string) : object[] {\r\n    return array.reduce(function (rv: any, x: any) {\r\n        (rv[x[key]] = rv[x[key]] || []).push(x);\r\n        return rv;\r\n    }, {});\r\n};\r\n\r\nconst toSortObjectKeys = function(object : any): object{\r\n    let sortedObject= {}\r\n    Object.keys(object)\r\n        .sort()\r\n        .forEach(function(v:any) {\r\n            sortedObject = {...sortedObject , [v] : object[v]}\r\n        });\r\n    return sortedObject\r\n}\r\n\r\nexport default function toShowNotification (flash: { type: any; message: any; } ,settings?: object): void {\r\n    Swal.fire({\r\n        toast: true,\r\n        position: 'top-end',\r\n        showConfirmButton: false,\r\n        timer: 2000,\r\n        timerProgressBar: true,\r\n        icon: flash.type,\r\n        title: flash.message,\r\n        didOpen: (toast) => {\r\n            toast.addEventListener('mouseenter', Swal.stopTimer)\r\n            toast.addEventListener('mouseleave', Swal.resumeTimer)\r\n        },\r\n        ...settings,\r\n    })\r\n}\r\n\r\n\r\nexport {groupBy, toSortObjectKeys}","import React from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\nimport emptyPicture from '../../access/images/background_hotel.webp'\r\ntype Props = {\r\n    id: string, name: string, imgUrl: string, group: string, homes : []\r\n}\r\n\r\nexport default function CommunityItem(props:Props) {\r\n    const {id,name,imgUrl,homes} = props\r\n\r\n    const toGetCommunityHouses = (communityId: string): object[] => {\r\n        return homes.filter(({...item}: any) => {\r\n            return item.communityId.toLowerCase() === communityId.toLowerCase()\r\n        })\r\n    }\r\n    const itemHomes = toGetCommunityHouses(id)\r\n    const prices = itemHomes.map(({...item} : any )=>{ return item.price})\r\n    const averagePrice = prices.length ? prices.reduce((a, b) => a + b, 0) / prices.length : 0;\r\n\r\n\r\n\r\n    return(\r\n\r\n        <div className={'communityItem'}>\r\n            <Link className={'communityItem__link'} to={`/communities/${id}`} title={name} state={name}>\r\n                <img className={'communityItem__picture'} src={imgUrl ? imgUrl : emptyPicture } alt={name}/>\r\n            </Link>\r\n\r\n            <div className={'communityItem__description'}>\r\n            <p className={'communityItem__title'} >{name}</p>\r\n                <p className={'communityItem__parameter'}>Average price {averagePrice.toFixed(2)} CAD</p>\r\n                <p className={'communityItem__parameter'}>Homes : {itemHomes.length}</p>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import {useEffect, useRef, useState} from \"react\";\r\nimport CommunityItem from \"../components/CommunityItem\";\r\nimport toShowNotification, {groupBy, toSortObjectKeys} from \"../helpers\";\r\nimport MainLayout from \"../layouts/MainLayout\";\r\n\r\ninterface CommunitiesItem {\r\n    id: string,\r\n    name: string,\r\n    imgUrl: string,\r\n    group: string\r\n}\r\n\r\ninterface CommunitiesItems extends Array<CommunitiesItem> {\r\n}\r\n\r\nexport default function Communities() {\r\n    const [communities, setCommunities] = useState([] as object);\r\n    const [homes, setHomes] = useState([] as Array<object>);\r\n    const htmlRef = useRef<HTMLHtmlElement | null>(null);\r\n    const toSortCommunities = (communities: CommunitiesItems): object[] => {\r\n        return communities.sort(function (a: any, b: any) {\r\n            return a.name.localeCompare(b.name);\r\n        });\r\n    }\r\n    const toGetCommunities = async () => {\r\n        const response = await fetch('https://storage.googleapis.com/openhouse-ai-fe-coding-test/communities.json');\r\n        if (response.ok) {\r\n            return response.json();\r\n        }\r\n        throw new Error('Something went wrong');\r\n    }\r\n    const toGetHomes = async () => {\r\n        const response = await fetch('https://storage.googleapis.com/openhouse-ai-fe-coding-test/homes.json');\r\n        if (response.ok) {\r\n            return response.json();\r\n        }\r\n        throw new Error('Something went wrong');\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        htmlRef.current = document.querySelector('html')\r\n        htmlRef.current?.classList.add('__loading');\r\n\r\n        toGetCommunities()\r\n            .then((responseJson) => {\r\n                const sortedData = toSortCommunities(responseJson)\r\n                const groupedData = groupBy(sortedData,'group')\r\n                const groupedCommunities = toSortObjectKeys(groupedData)\r\n\r\n                setCommunities(groupedCommunities)\r\n                htmlRef.current?.classList.remove('__loading');\r\n            })\r\n            .catch((error) => {\r\n                toShowNotification({ type: 'error', message: error.message })\r\n            });\r\n\r\n        toGetHomes()\r\n            .then((responseJson) => {\r\n                setHomes(responseJson)\r\n            })\r\n            .catch((error) => {\r\n                toShowNotification({ type: 'error', message: error.message })\r\n            });\r\n    }, []);\r\n\r\n\r\n\r\n    return (\r\n        <MainLayout pageTitle={'Communities'}>\r\n            <div className={'communitiesPage'}>\r\n                {Object.entries(communities).map(({...item}: any, index) => {\r\n                    return (\r\n                        <div className={'community'} key={index}>\r\n                            <div className={'communityName'}>\r\n                                <span className={'title'}>{item[0]}</span>\r\n                                <span className={'line'}></span>\r\n                            </div>\r\n                            <div className={'communityItems'}>\r\n                                {item[1].map(({...item}: any, index: any) => {\r\n                                    return <CommunityItem {...item} key={index} homes={homes}/>\r\n                                })}\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                })}\r\n            </div>\r\n        </MainLayout>\r\n\r\n\r\n    )\r\n}"],"names":["groupBy","array","key","reduce","rv","x","push","toSortObjectKeys","object","sortedObject","Object","keys","sort","forEach","v","toShowNotification","flash","settings","Swal","toast","position","showConfirmButton","timer","timerProgressBar","icon","type","title","message","didOpen","addEventListener","CommunityItem","props","id","name","imgUrl","homes","itemHomes","communityId","filter","_ref","item","toLowerCase","prices","map","_ref2","price","averagePrice","length","a","b","_jsxs","className","children","_jsx","Link","to","concat","state","src","emptyPicture","alt","toFixed","Communities","communities","setCommunities","useState","setHomes","htmlRef","useRef","useEffect","_htmlRef$current","current","document","querySelector","classList","add","async","response","fetch","ok","json","Error","toGetCommunities","then","responseJson","_htmlRef$current2","sortedData","localeCompare","toSortCommunities","groupedData","groupedCommunities","remove","catch","error","toGetHomes","MainLayout","pageTitle","entries","index","_createElement"],"sourceRoot":""}